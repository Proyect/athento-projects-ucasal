{% extends "ui/base.html" %}
{% block content %}
<div class="row justify-content-center">
  <div class="col-xl-10">
    <div class="card shadow-sm">
      <div class="card-header d-flex align-items-center">
        <i class="bi bi-upload me-2"></i>
        <strong>Subir título</strong>
      </div>
      <div class="card-body">
        {% if error %}<div class="alert alert-danger"><i class="bi bi-exclamation-triangle me-1"></i>{{ error }}</div>{% endif %}
        {% if ok %}
          <div class="alert alert-success"><i class="bi bi-check2-circle me-1"></i>Título subido correctamente</div>
          {% if result %}
            <details class="mb-3">
              <summary class="text-muted">Ver respuesta</summary>
              <pre class="bg-light p-2 border rounded mt-2">{{ result|safe }}</pre>
            </details>
          {% endif %}
        {% endif %}

        <form method="post" enctype="multipart/form-data" class="mt-2">
          {% csrf_token %}
          <div class="mb-3">
            <label class="form-label">Archivo (PDF)</label>
            <input class="form-control" type="file" name="file" accept="application/pdf" required />
            <div class="form-text">Solo archivos .pdf</div>
          </div>
          <div class="row g-3">
            <div class="col-md-4">
              <label class="form-label">Filename</label>
              <input class="form-control" type="text" name="filename" required />
            </div>
            <div class="col-md-4">
              <label class="form-label">Doctype</label>
              <input class="form-control" type="text" name="doctype" value="form_titulo" placeholder="form_titulo" required />
              <div class="form-text">Ej.: form_titulo</div>
            </div>
            <div class="col-md-4">
              <label class="form-label">Serie</label>
              <select class="form-select" name="serie" required>
                <option value="" selected disabled>Seleccione una serie</option>
                <option value="0af448d6-8003-45ee-a69d-6c5dda44dcc7">4 INGENIERIA</option>
                <option value="1734321a-e31d-4b50-ae34-d1d5f8bb36ff">3 CIENCIAS JURIDICAS</option>
                <option value="2320305d-3169-464f-a7ea-76a2c62d79c0">RECTORADO</option>
                <option value="2b2c249e-1480-44da-86f5-da4e146b5380">Titulo</option>
                <option value="3d5791bf-c6c7-481c-8412-e93eded52dcb">7 ESCUELA UNIVERSITARIA DE EDUCACION FISICA</option>
                <option value="523395a3-ba05-4d32-a2c3-e6279ffea790">SECRETARIA GENERAL</option>
                <option value="53c45b3e-fb0a-4f00-a74a-89b6ffbe1a3e">1 ARTES Y CIENCIAS</option>
                <option value="5e2d2125-77ac-44cd-84ce-aa978f9a4c5a">13 FACULTAD DE CIENCIAS DE LA SALUD</option>
                <option value="72e7f904-5d4f-4b2b-8350-fb88c67c358f">21 FACULTAD DE EDUCACION</option>
                <option value="83b3faf8-263e-4493-af9f-161a06cd291f">12 VICE-RECTORADO ACADEMICO</option>
                <option value="848b4dba-7392-4a04-84e3-3dceb9014e2f">8 ESCUELA UNIVERSITARIA DE TURISMO</option>
                <option value="8991d890-2bfc-4d11-802e-4fc0b9710206">17 ESCUELA DE IOS</option>
                <option value="8c1da09c-c3e0-4c46-9482-16f9782baee4">15 SUBSEDE BUENOS AIRES</option>
                <option value="8f47c06f-be49-436f-b82e-8ef420a59d46">5 ARQUITECTURA Y URBANISMO</option>
                <option value="a0bdc1f9-87e3-42b9-9600-2be3f2bc8bc5">25 VICERECTORADO DE TECNOLOGIA Y EDUCACION DIGITAL</option>
                <option value="a906792c-af58-4979-a9c4-66804301d63f">6 ESCUELA UNIVERSITARIA DE TRABAJO SOCIAL</option>
                <option value="b4a8ebeb-fda3-422f-a6b1-d15ae658af11">20 ESCUELA UNIVERSITARIA DE MUSICA</option>
                <option value="be07c2ab-93e9-4783-a4f0-2191beb154a9">81 INSTITUTO DE LA FAMILIA Y LA VIDA JUAN PABLO II</option>
                <option value="d2eacf75-63dd-49f3-b586-9ee81aaee568">9 CIENCIAS AGRARIAS Y VETERINARIAS</option>
                <option value="f29d1547-58f9-42eb-87f5-32417f49b76e">11 ESCUELA UNIVERSITARIA DE TEOLOGIA Y FILOSOFIA</option>
                <option value="fa05ef6e-fce7-4f2f-be0f-00dd515efaee">2 ECONOMIA Y ADMINISTRACION</option>
              </select>
            </div>
          </div>
          <div class="mt-3">
            <label class="form-label">Metadatas (JSON opcional)</label>
            <textarea class="form-control" rows="4" name="metadatas" placeholder='{"metadata.form_titulo": "ok"}'>              
            </textarea>
            <div class="form-text">Pega aquí pares clave/valor de metadatos admitidos por Athento.</div>
          </div>
          <div class="mt-4 d-flex gap-2">
            <button class="btn btn-primary" type="submit"><i class="bi bi-cloud-upload me-1"></i>Subir</button>
            <a class="btn btn-outline-secondary" href="/ui/titulos/"><i class="bi bi-arrow-left"></i> Volver</a>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
{% endblock %}
